---
title: MySQL 体系结构
---

# {{ $frontmatter.title }}

::: tip 今天心情不好，来个emo的歌曲 😭

<Iframe src="//music.163.com/outchain/player?type=2&id=1306923998&auto=1&height=66"> </Iframe>

:::


## 数据库和实例
### 1、数据库
概念： 数据库是物理操作系统文件或其他文件的集合，是以`.frm、.myd、.myi和、.ibd`等为扩展名的文件组合。
是依照某种数据模型组织起来，并存放在存储器中的数据集合

### 2、实例
概念：实例在系统中表现为一个进程、是用于真正操作数据库文件。
数据库实例，是程序，是位于用户与操作系统之间的一层数据管理软件。
用户对数据库的任何操作，包括数据库定义，数据查询、数据维护、数据库运行控制等都是在数据实例下进行的。

## MySQL 体系结构
MySQL 数据库管理系统采用客户/服务体系结构。<br>
通过所支持的各类接口将服务器和客户机链接。<br>
数据库服务器监听从网络上传递过来的客户请求，并更具这些请求访数据库中的内容，以便想客户提供所需要的数据信息。<br>
MySQL 服务器的组成
+ 链接池组件
+ 服务和管理组件
+ SQL接口组件
+ 查询分析器组件
+ 优化器组件
+ 缓冲组件
+ 插件式存储引擎和物理文件
::: tip MySQL体系结构
![](https://photohosting.oss-cn-hangzhou.aliyuncs.com/captures/mysql/QQ20230319-205733.png)
:::

## 数据库存储引擎
在关系性数据库中，数据是以表示的形式进行存储的，而存储引擎就是存储数据的方式。
在MySQL中的存储引擎使用的是一种可拔插式的设计，我们可以根据自己的需要进行选择。使用下面的指令可以查看当前 MySQL 所支持的有那些存储引擎
```sql
SHOW ENGINES;
```
::: info 我的MySQL支持的引擎
![](https://photohosting.oss-cn-hangzhou.aliyuncs.com/captures/mysql/2023-03-19_21-21.png)<br>
其中 InnoDB 和 NDB 提供食物安全表，其他存储引擎都是非事物安全表。
:::


<style>
.center 
{
  width: auto;
  display: table;
  margin-left: auto;
  margin-right: auto;
}
</style>
<div class="center">

| 名称、特性   | MyISAM | InnoDB | MEMORY | ARCHIVE | NDB |
|:-------:|:------:|:------:|:------:|:-------:|:---:|
| 存储限制    | 有      | 64TB   | 有      | 无       | 有   |
| 事物安全    | 支持     | 不支持    | 不支持    | 不支持     | 不支持 |
| 锁机制     | 表锁     | 行锁     | 表锁     | 行锁      | 行锁  |
| B树索引    | 支持     | 支持     | 支持     | 不支持     | 支持  |
| 哈希索引    | 支持     | 支持     | 不支持    | 不支持     | 不支持 |
| 全文索引    | 支持     | 不支持    | 不支持    | 不支持     | 不支持 |
| 集群索引    | 支持     | 不支持    | 不支持    | 不支持     | 不支持 |
| 数据索引    | 支持     | 支持     | 支持     | 不支持     | 不支持 |
| 索引缓存    | 支持     | 支持     | 支持     | 不支持     | 支持  |
| 数据可压缩   | 支持     | 不支持    | 不支持    | 支持      | 不支持 |
| 空间使用    | 低      | 高      | N/A    | 低       | 低   |
| 内存使用    | 低      | 高      | 中等     | 低       | 高   |
| 批量插入的速度 | 高      | 低      | 高      | 高       | 高   |
| 支持外键    | 支持     | 不支持    | 不支持    | 支持      | 不支持 |
<p align="center"><font face="黑体" size=2.>表1 常用存储引擎的具体特性</font></p>
</div>

其中最常用的搜索引擎为 **InnoDB**、**MyISAM**、**MEMORY**、**ARCHIVE**

### 1. InnoDB 存储引擎
1. 作用：InnoDB 存储引擎支持事务，提供了具有提交、回滚和崩溃恢复能力的事务安全，其设计目标就是面向在线事务处理(OLTP)的应用，其特点是行锁设计和支持外键。
从MysQL 5.5.8 版本开始，InnoDB 存储引擎为默认的存储引擎。与 MyISAM 存储引擎相比,InnoDB 写处理效率较差，并且占用更多的磁盘空间，以保留数据和素引。
2. 所采用的方式：InnoDB 存储引擎采用聚集 （Clustered）方式，将数据按照组件的顺序存放在一个逻辑的表空间中,如果表中没有显性指定主键,InnoDB 存储引擎会为每一行生成一个6字节的 ROWD,并以此作为主键。
3. InnoDB 存储表和素引有以下两种方式：
+ （1）使用共享表空间存储，将创建的表结构保存在.frm 文件中，数据和索引保存在innodb_data_home_dir 和 innodb_data_tile_path定义的表空间中，并且可以是多个文件。
+ （2）使用多表空间存储,创建的表结构仍然保存在．frm 文件中，但是每个表的数据和素引单独保存在.ibd 中。如果是分区表,则每个分区对应单独的：ibd 文件，文件名是**“表名十分区名”**。可以在创建分区的时候指定每个分区的数据文件的位置，以此来将表的I/0均匀分布在多个磁盘上。
4. 总结：InnODB 存储引擎是 MysQL 数据库最为常用的一种引擎。Facebook、Google、Yahoo 等公司已成功应用 InnoDB 存储引擎，并证明 InnoDB 存储引擎具有高可用性、高性能以及高扩展性。


### 2. MyISAM 存储引擎
MyISAM 存储引擎主要面向一些 OLAP 数据应用，其优势是访问的速度快，对事务完整性没有要求，以 SELECT 和 INSERT 为主的应用，基本上都可以使用这引警来创建表。MyISAM 存储引攀不支持事务、也不支持外键，但支特全文素引。
每个 MyISAM 存储引擎表在磁盘上存储成了个文件，其文件名都和表名相同，但扩展名分别如下。<br>
（1）.frm,存储表定义。<br>
（2）.myd（mydata），存储数据。<br>
（3）.myi(myindex)，存储索引。<br>
数据文件和素引文件可以放置在不同的目录,平均分布1/0,获得更快的速度。

### 3. MEMORY 存储引擎
MEMORY 存储引擎使用内存中的内容来创建表。每个 MEMORY 表实际对应一个磁盘文件，格式是．frm。 MEMORY 类型的表的访问速度非常快。由于它的数据是放在内存中，并且默认使用 HASH 素引,但是一旦服务关闭，表中的数据就会丢失掉。
MEMORY 类型的存储引擎主要用在那些内容变化不频繁的代码表,或者作为统计操作的中间结果表，便于高效地对中间结果进行分析并得到最终的统计结果。对
MEMORY 存储引擎的表进行更新操作要谨慎，因为数据并没有实际写人磁盘中，所以一定要对下次重新启动服务后如何获得这些修改后的数据有所考虑。

### 4. ARCHIVE 存储引擎
ARCHTVE 存储列等值只支持 INSERT 和 SELECT 操作。ARCHIVE 存储引擎非常适合存储归档数据，如日志信息。ARCHTVE存储引擎使用行锁来实现高并发的插人操作，但是其本身并不是北务安全的存储引華，其设计目的就是提供商連的插人和压缩功能。


### 5. 默认存储引擎的操作
```sql
SHOW VARIABLES LIKE 'storage_engine&';
```


<CopyRight/>


