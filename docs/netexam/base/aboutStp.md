---
title: STP 生成树协议
---

# {{ $frontmatter.title }}

## 背景
为了实现二层设备（Ethernel协议）之间的可靠性，企业网络通常拿多台设备或链路实现链路冗余备份，会引起环路。<br>
为了提高网络可靠性，交换网络中通常会使用冗余链路，然而，冗余链路会给交换网络带来环路风险，并导致广播风暴以及MAC地址表不稳定等问题，进而会影响到用户的通信质量，生成树协议STP（Spanning Tree Protocol）可以在提高可靠性的同时又能避免环路带来的各种问题<br>

## 二层网络设计的需求和问题
+ 为了提高可靠性，交换机之间会通过多条链路相连，从而避免单点鼓故障。
+ 但也会带来一些致命的环路问题。

+ 环路问题给用户带来的后果：网络体验差、延迟高、丢包
+ 环路引起的问题：极大占用链路带宽资源和设备资源，造成大量的垃圾流量。

## 环路影响
+ 网络广播风暴
+ MAC地址表项不稳定（MAC地址表震荡）
+ 重复的帧拷贝

## STP 生成树协议
### 功能
| 功能   | 备注                            |
|------|-------------------------------|
| 消除环路 | 通过阻断冗余链路来消除网络中可能存在的环路         |
| 链路备份 | 当正常工作的链路出现问题，激活备份链路，及时恢复网络连通性 |

+ STP操作：通过构建一颗无环的树来消除网络中的环路。

+ BPDU：Bridge Protocol Data Unit - 桥协议数据单元
